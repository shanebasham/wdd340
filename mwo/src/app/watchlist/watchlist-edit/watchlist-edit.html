<div class="banner success" *ngIf="successMessage">
  {{ successMessage }}
</div>
<div class="glass-card watchlist-edit-card">
  <form id="watchlist-edit"
        *ngIf="watchlistForm?.controls?.title"
        [formGroup]="watchlistForm"
        (ngSubmit)="onSubmit()">

    <div class="form-group">
      <label>Title</label>
      <input type="text"
             class="glass-input"
             formControlName="title">
    </div>

    <div class="form-group">
      <label>Year</label>
      <input type="number"
             class="glass-input"
             formControlName="year">
    </div>

    <div class="form-group">
      <label>Genres</label>
      <div class="genre-grid">
        <button type="button"
                *ngFor="let genre of genresList"
                class="genre-chip"
                [class.active]="hasGenre(genre)"
                (click)="toggleGenre(genre)">
          {{ genre }}
        </button>
      </div>
    </div>

    <div class="form-group">
      <label>Type</label>
      <select class="glass-input" formControlName="type">
        <option value="movie">Movie</option>
        <option value="series">Series</option>
      </select>
    </div>

    <div class="form-group">
      <label>Status</label>
      <select class="glass-input" formControlName="status">
        <option value="planned">Planned</option>
        <option value="watching">Watching</option>
        <option value="completed">Completed</option>
      </select>
    </div>

    <div class="form-group inline-toggles">
      <label>
        <input type="checkbox" formControlName="watched">
        Mark as Watched
      </label>

      <label>
        <input type="checkbox" formControlName="favorite">
        Favorite
      </label>
    </div>

    <div class="form-group">
      <label>Rating</label>
      <input type="number" min="0" max="10" step="0.5" class="glass-input" formControlName="rating">
    </div>

    <div class="form-group">
      <label>Notes</label>
      <textarea rows="3" class="glass-input" formControlName="notes"></textarea>
    </div>

    <div class="edit-actions">
      <button class="btn btn-success" type="submit" [disabled]="!watchlistForm.valid">Save</button>
      <button class="btn btn-danger" type="button" (click)="onCancel()">Cancel</button>
    </div>

  </form>
</div>
